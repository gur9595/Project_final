<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="mybatis.MemberDAOImpl">

   <!-- 회원가입 --> 
	  <insert id="memberJoin" parameterType="mybatis.MemberDTO"> 
		  insert into member (m_idx, m_id, m_pw, m_name, m_birth, m_email, m_phone, m_addr, m_date, m_position, m_sex, m_abil, m_foot, m_pic, AUTHORITY) values( 
		  	member_seq.nextval, #{m_id}, #{m_pw}, #{m_name}, #{m_birth}, #{m_email}, #{m_phone},
		  	#{m_addr}, sysdate, #{m_position}, #{m_sex}, #{m_abil}, #{m_foot}, #{m_pic}, 'normal') 
	  </insert> 
	   
	  <select id="memberInfo" resultType="mybatis.MemberDTO" parameterType="mybatis.MemberDTO">
	  	select * from member where m_id = #{m_id}
	  </select>
	  
	  <update id="memberUpdate" parameterType="mybatis.MemberDTO">
	  	update member set m_pw=#{m_pw}, m_name=#{m_name}, m_birth=#{m_birth}, m_email=#{m_email}, m_phone=#{m_phone}, 
	  		m_addr=#{m_addr}, m_position=#{m_position}, m_sex=#{m_sex}, m_abil=#{m_abil}, m_foot=#{m_foot}, m_pic=#{m_pic} 
	  		where m_id=#{m_id} 
	  </update>
	  
	  <update id="managerUpdate" parameterType="mybatis.MemberDTO">
	  	update member set m_rfa=#{m_rfa}, m_work=#{m_work}, m_career=#{m_career}, m_area=#{m_area}, m_duration=#{m_duration}, authority='manager'
	  	where m_id=#{m_id}
	  </update>
	  
	
	<!-- id찾기 -->
	<select id="id_mailSending" parameterType="mybatis.MemberDTO" resultType="String">
		select m_id from member where m_name like #{m_name} and m_email like #{m_email}
	</select>
	
	<!-- pw찾기 -->
	<select id="pw_mailSending" parameterType="mybatis.MemberDTO" resultType="String">
		select m_pw from member where m_id like #{m_id} and m_email like #{m_email}
	</select>
	 
  </mapper>

